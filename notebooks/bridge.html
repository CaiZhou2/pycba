
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Bridge Analysis &#8212; PyCBA 0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/bridge';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Beam Configuration" href="../general.html" />
    <link rel="prev" title="Influence Lines" href="inf_lines.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/pycba_logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/pycba_logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../installation.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../tutorials.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../general.html">
                        Beam Configuration
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../theory.html">
                        Theoretical Basis
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ccaprani/pycba" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/ccaprani" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../installation.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../tutorials.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../general.html">
                        Beam Configuration
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../theory.html">
                        Theoretical Basis
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ccaprani/pycba" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/ccaprani" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction to PyCBA</a></li>
<li class="toctree-l1"><a class="reference internal" href="inf_lines.html">Influence Lines</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Bridge Analysis</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../tutorials.html" class="nav-link">Tutorials</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Bridge Analysis</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="Bridge-Analysis">
<h1>Bridge Analysis<a class="headerlink" href="#Bridge-Analysis" title="Permalink to this heading">#</a></h1>
<p>This notebook demonstrates the use of <code class="docutils literal notranslate"><span class="pre">PyCBA</span></code> in conducting moving load and other analyses relevant to bridge analysis.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pycba</span> <span class="k">as</span> <span class="nn">cba</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">IPython</span> <span class="kn">import</span> <span class="n">display</span>
</pre></div>
</div>
</div>
<section id="Example-1---Moving-Load-Envelope">
<h2>Example 1 - Moving Load Envelope<a class="headerlink" href="#Example-1---Moving-Load-Envelope" title="Permalink to this heading">#</a></h2>
<p>This example shows the basic interface for moving a vehicle across the bridge.</p>
<p>Consider a two-span continuous bridge, 50 m long:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
<span class="n">EI</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="mf">1e11</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">))</span> <span class="o">*</span> <span class="mf">1e-6</span>
<span class="n">R</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>and a three-axle vehicle with a 6 t steer axle, 6 m spacing back to the tandem of 12 t axles each with spacing 1.2 m:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">axle_spacings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">])</span>
<span class="n">axle_weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span> <span class="o">*</span> <span class="mf">9.81</span>  <span class="c1"># t to kN</span>
</pre></div>
</div>
</div>
<p>Now define the <code class="docutils literal notranslate"><span class="pre">bridge_analysis</span></code> object and add the bridge definition and vehicle definitions:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bridge_analysis</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BridgeAnalysis</span><span class="p">()</span>
<span class="n">bridge</span> <span class="o">=</span> <span class="n">bridge_analysis</span><span class="o">.</span><span class="n">add_bridge</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">EI</span><span class="p">,</span> <span class="n">R</span><span class="p">)</span>
<span class="n">vehicle</span> <span class="o">=</span> <span class="n">bridge_analysis</span><span class="o">.</span><span class="n">add_vehicle</span><span class="p">(</span><span class="n">axle_spacings</span><span class="p">,</span> <span class="n">axle_weights</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Examine the vehicle at a single position, when the front axle is at 30.0 m say:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bridge_analysis</span><span class="o">.</span><span class="n">static_vehicle</span><span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="kc">True</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_bridge_9_0.png" src="../_images/notebooks_bridge_9_0.png" />
</div>
</div>
<p>Now we run the vehicle over the bridge, returning the envelope of results. When run as a python script, the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> figure will animate each result when <code class="docutils literal notranslate"><span class="pre">plot_all=True</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bridge_analysis</span><span class="o">.</span><span class="n">run_vehicle</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">plot_env</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plot_all</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_bridge_11_0.png" src="../_images/notebooks_bridge_11_0.png" />
</div>
</div>
<p>Alternatively, using the <code class="docutils literal notranslate"><span class="pre">reverse()</span></code> method, we can do an analysis for the vehicle travelling in the reverse direction.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vehicle</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="n">bridge_analysis</span><span class="o">.</span><span class="n">static_vehicle</span><span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;pycba.results.BeamResults at 0x7f1f0364ff70&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_bridge_13_1.png" src="../_images/notebooks_bridge_13_1.png" />
</div>
</div>
</section>
<section id="Example-2---Critical-Values-and-Positions">
<h2>Example 2 - Critical Values and Positions<a class="headerlink" href="#Example-2---Critical-Values-and-Positions" title="Permalink to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="mi">37</span><span class="p">]</span>
<span class="n">EI</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="mf">1e11</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">))</span> <span class="o">*</span> <span class="mf">1e-6</span>
<span class="n">R</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bridge</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BeamAnalysis</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">EI</span><span class="p">,</span> <span class="n">R</span><span class="p">)</span>
<span class="n">bridge</span><span class="o">.</span><span class="n">npts</span> <span class="o">=</span> <span class="mi">500</span>  <span class="c1"># Use more points along the beam members</span>
<span class="n">vehicle</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">VehicleLibrary</span><span class="o">.</span><span class="n">get_m1600</span><span class="p">(</span><span class="mf">6.25</span><span class="p">)</span>
<span class="n">bridge_analysis</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BridgeAnalysis</span><span class="p">(</span><span class="n">bridge</span><span class="p">,</span> <span class="n">vehicle</span><span class="p">)</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">bridge_analysis</span><span class="o">.</span><span class="n">run_vehicle</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>From the envelope, we can extract the critical values of load effects, where they are located, and the vehicle position that caused it:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cvals</span> <span class="o">=</span> <span class="n">bridge_analysis</span><span class="o">.</span><span class="n">critical_values</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>and so if we are interested in the maximum bending moment in particular, we can interogate the results as follows:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pos</span> <span class="o">=</span> <span class="n">cvals</span><span class="p">[</span><span class="s2">&quot;Mmax&quot;</span><span class="p">][</span><span class="s2">&quot;pos&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">at</span> <span class="o">=</span> <span class="n">cvals</span><span class="p">[</span><span class="s2">&quot;Mmax&quot;</span><span class="p">][</span><span class="s2">&quot;at&quot;</span><span class="p">]</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">cvals</span><span class="p">[</span><span class="s2">&quot;Mmax&quot;</span><span class="p">][</span><span class="s2">&quot;val&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Max moment is </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s2"> kNm at </span><span class="si">{</span><span class="n">at</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> m when front axle position is </span><span class="si">{</span><span class="n">pos</span><span class="si">}</span><span class="s2"> m&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Max moment is 7809.3 kNm at 20.35 m when front axle position is 29.1 m
</pre></div></div>
</div>
<p>and confirm the results with a static analysis with the vehicle at that position:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bridge_analysis</span><span class="o">.</span><span class="n">static_vehicle</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="kc">True</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_bridge_22_0.png" src="../_images/notebooks_bridge_22_0.png" />
</div>
</div>
</section>
<section id="Example-3---Critical-M1600-Positions">
<h2>Example 3 - Critical M1600 Positions<a class="headerlink" href="#Example-3---Critical-M1600-Positions" title="Permalink to this heading">#</a></h2>
<p>Here we consider the positioning of the M1600 vehicle to obtain maximum bending moment in simply-supported bridges of spans 15 to 40~m</p>
<p>First create the array to store the results and the span lengths.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">critical_axle_positions</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">critical_beam_location</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">spans</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mf">40.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Next, create unchanging variables outside the loop, and then loop to find the critical positions:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vehicle</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">VehicleLibrary</span><span class="o">.</span><span class="n">get_m1600</span><span class="p">(</span><span class="mf">6.25</span><span class="p">)</span>
<span class="k">for</span> <span class="n">L</span> <span class="ow">in</span> <span class="n">spans</span><span class="p">:</span>
    <span class="n">EI</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="mf">1e11</span> <span class="o">*</span> <span class="mf">1e-6</span>
    <span class="n">R</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">bridge</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BeamAnalysis</span><span class="p">([</span><span class="n">L</span><span class="p">],</span> <span class="n">EI</span><span class="p">,</span> <span class="n">R</span><span class="p">)</span>
    <span class="n">bridge</span><span class="o">.</span><span class="n">npts</span> <span class="o">=</span> <span class="mi">500</span>  <span class="c1"># Use more points along the beam members</span>
    <span class="n">bridge_analysis</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BridgeAnalysis</span><span class="p">(</span><span class="n">bridge</span><span class="p">,</span> <span class="n">vehicle</span><span class="p">)</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">bridge_analysis</span><span class="o">.</span><span class="n">run_vehicle</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
    <span class="n">cvals</span> <span class="o">=</span> <span class="n">bridge_analysis</span><span class="o">.</span><span class="n">critical_values</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    <span class="n">critical_axle_positions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cvals</span><span class="p">[</span><span class="s2">&quot;Mmax&quot;</span><span class="p">][</span><span class="s2">&quot;pos&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">critical_beam_location</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cvals</span><span class="p">[</span><span class="s2">&quot;Mmax&quot;</span><span class="p">][</span><span class="s2">&quot;at&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>And plot the results</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">spans</span><span class="p">,</span><span class="n">critical_axle_positions</span><span class="p">,</span><span class="s1">&#39;k.:&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Front axle position (m)&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Position of M1600 Vehicle for Maximum Moment&quot;</span><span class="p">);</span>

<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">spans</span><span class="p">,</span><span class="n">spans</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">critical_beam_location</span><span class="p">,</span><span class="s1">&#39;k.:&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Location of Maximum Moment&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Distance from midspan (m)&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">locator_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">nbins</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Bridge span (m)&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_bridge_28_0.png" src="../_images/notebooks_bridge_28_0.png" />
</div>
</div>
</section>
<section id="Example-4---Access-Assessment-for-Single-Vehicles">
<h2>Example 4 - Access Assessment for Single Vehicles<a class="headerlink" href="#Example-4---Access-Assessment-for-Single-Vehicles" title="Permalink to this heading">#</a></h2>
<p>This example considers the relative load effects between a reference vehicle and another vehicle. This type of analysis is commonly done to assess whether a new vehicle type would impose more onerous load effects on a bridge than some existing reference vehicle.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
<span class="n">EI</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="mf">1e11</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">))</span> <span class="o">*</span> <span class="mf">1e-6</span>
<span class="n">R</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">bridge</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BeamAnalysis</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">EI</span><span class="p">,</span> <span class="n">R</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Here we use a suite of reference vehicles (the Australian ABAG B-doubles) to create a “super-envelope”: an envelope of the load effect envelopes from each of the 3 reference vehicles.</p>
<p>Firstly, obtain the vehicle from the <code class="docutils literal notranslate"><span class="pre">VehicleLibrary</span></code> and analyze for the envelope, appending it to the list of envelopes.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">envs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">vehicle</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">VehicleLibrary</span><span class="o">.</span><span class="n">get_abag_bdouble</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">bridge_analysis</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BridgeAnalysis</span><span class="p">(</span><span class="n">bridge</span><span class="p">,</span> <span class="n">vehicle</span><span class="p">)</span>
    <span class="n">envs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bridge_analysis</span><span class="o">.</span><span class="n">run_vehicle</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>Next, create a new zero-like envelope and augment it with the stored envelopes, such that the result is the envelope of envelopes:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">envenv</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">Envelopes</span><span class="o">.</span><span class="n">zero_like</span><span class="p">(</span><span class="n">envs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">envs</span><span class="p">:</span>
    <span class="n">envenv</span><span class="o">.</span><span class="n">augment</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="n">bridge_analysis</span><span class="o">.</span><span class="n">plot_envelopes</span><span class="p">(</span><span class="n">envenv</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_bridge_34_0.png" src="../_images/notebooks_bridge_34_0.png" />
</div>
</div>
<p>Now analyze the permit application vehicle; here just taking an example vehicle from the <code class="docutils literal notranslate"><span class="pre">VehicleLibrary</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vehicle</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">VehicleLibrary</span><span class="o">.</span><span class="n">get_example_permit</span><span class="p">()</span>
<span class="n">bridge_analysis</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BridgeAnalysis</span><span class="p">(</span><span class="n">bridge</span><span class="p">,</span> <span class="n">vehicle</span><span class="p">)</span>
<span class="n">trial_env</span> <span class="o">=</span> <span class="n">bridge_analysis</span><span class="o">.</span><span class="n">run_vehicle</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_bridge_36_0.png" src="../_images/notebooks_bridge_36_0.png" />
</div>
</div>
<p>And we can plot the ratios of trial to reference envelopes</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">envr</span> <span class="o">=</span> <span class="n">bridge_analysis</span><span class="o">.</span><span class="n">envelopes_ratios</span><span class="p">(</span><span class="n">trial_env</span><span class="p">,</span> <span class="n">envenv</span><span class="p">)</span>
<span class="n">bridge_analysis</span><span class="o">.</span><span class="n">plot_ratios</span><span class="p">(</span><span class="n">envr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_bridge_38_0.png" src="../_images/notebooks_bridge_38_0.png" />
</div>
</div>
<p>As can be seen in this case, the central support reaction is greater than 1.0, as is the hogging moment (by about 7%). This vehicle is unlikely to be granted a permit as a result.</p>
</section>
<section id="Example-5---Access-Assessment-for-Vehicle-Spacings">
<h2>Example 5 - Access Assessment for Vehicle Spacings<a class="headerlink" href="#Example-5---Access-Assessment-for-Vehicle-Spacings" title="Permalink to this heading">#</a></h2>
<p>Using the <code class="docutils literal notranslate"><span class="pre">Vehicle.from_convoy</span></code> method we create a <code class="docutils literal notranslate"><span class="pre">Vehicle</span></code> object representing a sequence of vehicles at different spacings. Here, we will explore different prime mover and platform trailer combinations commonly adopted in “superload” transport convoys.</p>
<p>First set up the bridge as per Example 3:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
<span class="n">EI</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="mf">1e11</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">))</span> <span class="o">*</span> <span class="mf">1e-6</span>
<span class="n">R</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">bridge</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BeamAnalysis</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">EI</span><span class="p">,</span> <span class="n">R</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>And now define the components of the superload:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prime_mover</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">(</span><span class="n">axle_spacings</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.2</span><span class="p">,</span><span class="mf">1.2</span><span class="p">]),</span>
                          <span class="n">axle_weights</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">6.5</span><span class="p">,</span><span class="mf">9.25</span><span class="p">,</span><span class="mf">9.25</span><span class="p">])</span><span class="o">*</span><span class="mf">9.81</span><span class="p">)</span>
<span class="n">platform_trailer</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">(</span><span class="n">axle_spacings</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.8</span><span class="p">,]</span><span class="o">*</span><span class="mi">9</span><span class="p">),</span>
                               <span class="n">axle_weights</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">12</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span><span class="o">*</span><span class="mf">9.81</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Three spacing combinations are explored for the convoy comprising of two front prime movers followed by two platform trailers and then two back prime movers.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">inter_spaces</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">5.0</span><span class="p">,</span><span class="mf">6.3</span><span class="p">,</span><span class="mf">8.0</span><span class="p">,</span><span class="mf">6.0</span><span class="p">,</span><span class="mf">4.8</span><span class="p">]),</span>
               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">4.8</span><span class="p">,</span><span class="mf">6.0</span><span class="p">,</span><span class="mf">7.5</span><span class="p">,</span><span class="mf">6.0</span><span class="p">,</span><span class="mf">5.0</span><span class="p">]),</span>
               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">5.0</span><span class="p">,</span><span class="mf">6.3</span><span class="p">,</span><span class="mf">8.0</span><span class="p">,</span><span class="mf">6.3</span><span class="p">,</span><span class="mf">5.0</span><span class="p">])]</span>
</pre></div>
</div>
</div>
<p>Now, similar to Example 3, run the analysis for each set of spacings and store the envelopes:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">envs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">inter_spaces</span><span class="p">:</span>
    <span class="n">vehicle</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">Vehicle</span><span class="o">.</span><span class="n">from_convoy</span><span class="p">([</span><span class="n">prime_mover</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="p">[</span><span class="n">platform_trailer</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="p">[</span><span class="n">prime_mover</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
    <span class="n">bridge_analysis</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BridgeAnalysis</span><span class="p">(</span><span class="n">bridge</span><span class="p">,</span> <span class="n">vehicle</span><span class="p">)</span>
    <span class="n">envs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bridge_analysis</span><span class="o">.</span><span class="n">run_vehicle</span><span class="p">(</span><span class="mf">0.1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>And now augment the envelopes to get the overall envelope:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">envenv</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">Envelopes</span><span class="o">.</span><span class="n">zero_like</span><span class="p">(</span><span class="n">envs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">envs</span><span class="p">:</span>
    <span class="n">envenv</span><span class="o">.</span><span class="n">augment</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="n">bridge_analysis</span><span class="o">.</span><span class="n">plot_envelopes</span><span class="p">(</span><span class="n">envenv</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_bridge_49_0.png" src="../_images/notebooks_bridge_49_0.png" />
</div>
</div>
<p>Note that this overall envelope can only show the extremes of reaction values, since the time histories of reactions are not compatible.</p>
</section>
<section id="Example-6---Rail-loading">
<h2>Example 6 - Rail loading<a class="headerlink" href="#Example-6---Rail-loading" title="Permalink to this heading">#</a></h2>
<p>Using the <code class="docutils literal notranslate"><span class="pre">VehicleLibrary.get_la_rail</span></code> method we create a 300LA train load and calculate the values for Appendix C of AS5100.2.</p>
<p>First, create the vehicle using the library method, here the defaults of 300LA, 12m axle-group spacing (centre-to-centre), and 10 No. axle groups (length 150~m) are adequate. Note that we could rationalize the number of axle groups for shorter spans to reduce computation, but this is just a refinement.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vehicle</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">VehicleLibrary</span><span class="o">.</span><span class="n">get_la_rail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Next create the list of spans we wish to analyse (all simply-supported), and we’ll store the results for each span in a list for bending moment, shear, and reactions.</p>
<p>Here we’ll just do from 10 to 100~m spans in 10~m increments, but all 99 spans could be done.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">spans</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">M</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">V</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">R</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
<p>Now loop over each span and calculate the load effects</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">spans</span><span class="p">:</span>
    <span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="p">]</span>
    <span class="c1"># Simply-supported with arbitrary EI</span>
    <span class="n">bridge</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BeamAnalysis</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="mf">30e6</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">bridge</span><span class="o">.</span><span class="n">npts</span> <span class="o">=</span> <span class="mi">500</span>  <span class="c1"># Use more points along the beam</span>
    <span class="n">bridge_analysis</span> <span class="o">=</span> <span class="n">cba</span><span class="o">.</span><span class="n">BridgeAnalysis</span><span class="p">(</span><span class="n">bridge</span><span class="p">,</span> <span class="n">vehicle</span><span class="p">)</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">bridge_analysis</span><span class="o">.</span><span class="n">run_vehicle</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="n">cvals</span> <span class="o">=</span> <span class="n">bridge_analysis</span><span class="o">.</span><span class="n">critical_values</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">cvals</span><span class="p">[</span><span class="s2">&quot;Mmax&quot;</span><span class="p">][</span><span class="s2">&quot;val&quot;</span><span class="p">]</span>
    <span class="n">v</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">cvals</span><span class="p">[</span><span class="s2">&quot;Vmax&quot;</span><span class="p">][</span><span class="s2">&quot;val&quot;</span><span class="p">],</span> <span class="nb">abs</span><span class="p">(</span><span class="n">cvals</span><span class="p">[</span><span class="s2">&quot;Vmin&quot;</span><span class="p">][</span><span class="s2">&quot;val&quot;</span><span class="p">]))</span>
    <span class="n">r</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">cvals</span><span class="p">[</span><span class="s2">&quot;Rmax0&quot;</span><span class="p">][</span><span class="s2">&quot;val&quot;</span><span class="p">],</span> <span class="n">cvals</span><span class="p">[</span><span class="s2">&quot;Rmax1&quot;</span><span class="p">][</span><span class="s2">&quot;val&quot;</span><span class="p">])</span>
    <span class="c1"># now round to nearest 5 as code does</span>
    <span class="n">M</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">/</span> <span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">V</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">v</span> <span class="o">/</span> <span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">R</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">r</span> <span class="o">/</span> <span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The reason for calculating the shear and reaction is that the vehicle step distance can cause differences. The 0.1~m value selected here is quite small, especially for longer bridges, and so could be different to that used for generating the values in the code. Between the shear and reaction results, the code values should be replicated.</p>
<p>To display the results in a nice way, we use pandas and create a dataframe.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">spans</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">R</span><span class="p">))</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Span (m)&quot;</span><span class="p">,</span> <span class="s2">&quot;Moment (kNm)&quot;</span><span class="p">,</span> <span class="s2">&quot;Shear (kN)&quot;</span><span class="p">,</span> <span class="s2">&quot;Reaction (kN)&quot;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">spans</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Let’s have a look at the results, without showing the redundant index:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style type="text/css">
</style>
<table id="T_b0131">
  <thead>
    <tr>
      <th id="T_b0131_level0_col0" class="col_heading level0 col0" >Span (m)</th>
      <th id="T_b0131_level0_col1" class="col_heading level0 col1" >Moment (kNm)</th>
      <th id="T_b0131_level0_col2" class="col_heading level0 col2" >Shear (kN)</th>
      <th id="T_b0131_level0_col3" class="col_heading level0 col3" >Reaction (kN)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="T_b0131_row0_col0" class="data row0 col0" >10</td>
      <td id="T_b0131_row0_col1" class="data row0 col1" >2400</td>
      <td id="T_b0131_row0_col2" class="data row0 col2" >1040</td>
      <td id="T_b0131_row0_col3" class="data row0 col3" >1050</td>
    </tr>
    <tr>
      <td id="T_b0131_row1_col0" class="data row1 col0" >20</td>
      <td id="T_b0131_row1_col1" class="data row1 col1" >6300</td>
      <td id="T_b0131_row1_col2" class="data row1 col2" >1515</td>
      <td id="T_b0131_row1_col3" class="data row1 col3" >1530</td>
    </tr>
    <tr>
      <td id="T_b0131_row2_col0" class="data row2 col0" >30</td>
      <td id="T_b0131_row2_col1" class="data row2 col1" >12515</td>
      <td id="T_b0131_row2_col2" class="data row2 col2" >2005</td>
      <td id="T_b0131_row2_col3" class="data row2 col3" >2015</td>
    </tr>
    <tr>
      <td id="T_b0131_row3_col0" class="data row3 col0" >40</td>
      <td id="T_b0131_row3_col1" class="data row3 col1" >21555</td>
      <td id="T_b0131_row3_col2" class="data row3 col2" >2505</td>
      <td id="T_b0131_row3_col3" class="data row3 col3" >2515</td>
    </tr>
    <tr>
      <td id="T_b0131_row4_col0" class="data row4 col0" >50</td>
      <td id="T_b0131_row4_col1" class="data row4 col1" >32560</td>
      <td id="T_b0131_row4_col2" class="data row4 col2" >3015</td>
      <td id="T_b0131_row4_col3" class="data row4 col3" >3025</td>
    </tr>
    <tr>
      <td id="T_b0131_row5_col0" class="data row5 col0" >60</td>
      <td id="T_b0131_row5_col1" class="data row5 col1" >46405</td>
      <td id="T_b0131_row5_col2" class="data row5 col2" >3525</td>
      <td id="T_b0131_row5_col3" class="data row5 col3" >3535</td>
    </tr>
    <tr>
      <td id="T_b0131_row6_col0" class="data row6 col0" >70</td>
      <td id="T_b0131_row6_col1" class="data row6 col1" >62385</td>
      <td id="T_b0131_row6_col2" class="data row6 col2" >4025</td>
      <td id="T_b0131_row6_col3" class="data row6 col3" >4035</td>
    </tr>
    <tr>
      <td id="T_b0131_row7_col0" class="data row7 col0" >80</td>
      <td id="T_b0131_row7_col1" class="data row7 col1" >81045</td>
      <td id="T_b0131_row7_col2" class="data row7 col2" >4525</td>
      <td id="T_b0131_row7_col3" class="data row7 col3" >4535</td>
    </tr>
    <tr>
      <td id="T_b0131_row8_col0" class="data row8 col0" >90</td>
      <td id="T_b0131_row8_col1" class="data row8 col1" >102740</td>
      <td id="T_b0131_row8_col2" class="data row8 col2" >5020</td>
      <td id="T_b0131_row8_col3" class="data row8 col3" >5030</td>
    </tr>
    <tr>
      <td id="T_b0131_row9_col0" class="data row9 col0" >100</td>
      <td id="T_b0131_row9_col1" class="data row9 col1" >126300</td>
      <td id="T_b0131_row9_col2" class="data row9 col2" >5515</td>
      <td id="T_b0131_row9_col3" class="data row9 col3" >5525</td>
    </tr>
  </tbody>
</table></div>
</div>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="inf_lines.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Influence Lines</p>
      </div>
    </a>
    <a class="right-next"
       href="../general.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Beam Configuration</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Example-1---Moving-Load-Envelope">Example 1 - Moving Load Envelope</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Example-2---Critical-Values-and-Positions">Example 2 - Critical Values and Positions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Example-3---Critical-M1600-Positions">Example 3 - Critical M1600 Positions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Example-4---Access-Assessment-for-Single-Vehicles">Example 4 - Access Assessment for Single Vehicles</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Example-5---Access-Assessment-for-Vehicle-Spacings">Example 5 - Access Assessment for Vehicle Spacings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Example-6---Rail-loading">Example 6 - Rail loading</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  
  <div class="tocsection editthispage">
    <a href="https://github.com/ccaprani/pycba/edit/main/docs/source/notebooks/bridge.ipynb">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2022, Colin Caprani.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>